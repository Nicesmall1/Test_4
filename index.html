<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Сделки</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#FFFFFF;
  --card:#FFFFFF;
  --text:#000000;
  --muted:#666666;
  --accent:#EF3124;
  --border:#C9CACD;
  --blue:#0047FF;
}
*{box-sizing:border-box; margin:0; padding:0}
body{
  margin:0;
  padding:19.2px;
  background:var(--bg);
  color:var(--text);
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:400;
  font-size:12.8px;
  line-height:1;
}

/* Показывать/скрывать фрагменты в зависимости от вьюпорта */
.only-mobile { display: none; }
.desktop-only { display: inline; }
@media (max-width: 800px) {
  .only-mobile { display: inline-block; }
  .desktop-only { display: none; }
}

/* Мелкие мобильные доработки — ПОЧИНЕНО: 350px (не 350x) */
@media (max-width: 350px) {
  body { padding: 10px; font-size: 16px; -webkit-text-size-adjust: 100%; }
  h1 { font-size: 28px; line-height: 1.2; margin: 0 0 20px; text-align: center; }
  .container { padding: 0 10px; width: 100%; max-width: 100%; }
  .toolbar { gap: 12px; flex-direction: column; align-items: stretch; margin: 20px 0 15px; }
  .search { min-width: 100%; order: 1; }
  input[type="search"] { padding: 12px 16px; font-size: 16px; }
  .kpis { order: 2; justify-content: space-around; gap: 8px; flex-wrap: wrap; }
  .kpis .chip { font-size: 14px; padding: 8px 12px; flex: 1; min-width: 100px; text-align: center; }
  .filters { order: 3; justify-content: center; flex-wrap: wrap; gap: 6px; }
  button.filter { font-size: 12px; padding: 10px 12px; flex: 1; min-width: 80px; }
  .table-wrap { margin-bottom: 20px; max-height: calc(100vh - 250px); overflow: auto; -webkit-overflow-scrolling: touch; border-radius: 8px; width: 100%; }
  table { width: 100%; min-width: 100%; }
  thead th, tbody td { padding: 10px 8px; font-size: 12px; }
  .badge, .status { font-size: 11px; padding: 5px 8px; white-space: nowrap; }
  .footer { font-size: 12px; margin-top: 15px; }
}

@media (max-width: 350px) {
  body { overflow-x: hidden; width: 100%; }
  .rwd-table, .rwd-table tbody, .rwd-table tr, .rwd-table td { box-sizing: border-box; }
  tbody td { word-break: break-word; max-width: 120px; overflow: hidden; text-overflow: ellipsis; }
}

.container{ max-width:1400px; margin:auto; padding:0 19.2px; }
h1{
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:700;
  font-size:64px;
  line-height:60.8px;
  margin:0 0 32px;
  text-transform:lowercase;
}
.toolbar{
  display:flex; gap:19.2px; flex-wrap:wrap; align-items:center;
  margin:32px 0 24px; justify-content:space-between;
}
.search{flex:1;min-width:300px;max-width:400px}
input[type="search"]{
  width:100%; padding:9.6px 12.8px; border:1px solid var(--border);
  border-radius:10px; background:var(--card); color:var(--text); outline:none;
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:400; font-size:12.8px; line-height:1;
}
.kpis{ display:flex; gap:12.8px; flex-wrap:wrap; min-width:fit-content; }
.kpis .chip{
  padding:9.6px 12.8px; border:1px solid var(--border); border-radius:999px;
  background:var(--card); color:var(--text);
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:500; font-size:12.8px; line-height:14.64px; text-transform:uppercase;
}
.kpis .chip small{ color:var(--muted); font-weight:400; margin-left:8px; text-transform:none; }
.filters{ display:flex; gap:9.6px; flex-wrap:wrap; min-width:fit-content; }
button.filter{
  padding:9.6px 12.8px; border:1px solid var(--border); background:var(--card);
  color:var(--text); border-radius:10px; cursor:pointer;
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:500; font-size:12.8px; line-height:14.64px; text-transform:uppercase;
}
button.filter.active{ background:var(--accent); color:#FFFFFF; border-color:var(--accent); }

.rwd-table{ width:100%; border-collapse:collapse; font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
.rwd-table th, .rwd-table td{ padding:10px 12px; border-bottom:1px solid #e7e7e7; vertical-align:top; }
.rwd-table th{ text-align:left; font-weight:600; background:#fafafa; }
.rwd-table tbody tr:hover{ background:#fcfcfc; }

/* десктоп: правый край для числовых колонок */
@media (min-width: 801px){
  .num { text-align:right; font-variant-numeric: tabular-nums; }
}

@media (max-width: 800px) {
  /* Скрываем шапку и делаем карточки */
  .rwd-table thead { display: none; }
  .rwd-table tr {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 10px;
    padding: 12px 8px;
    border-bottom: 1px solid #E0E0E0;
  }
  .rwd-table td { padding: 0; border: none; }
  .rwd-table td::before { content: ""; display: none; }

  /* По умолчанию скрываем все ячейки */
  .rwd-table td { display: none; }

  /* Показываем Эмитент (1), Результат (6) и Срок (7) */
  .rwd-table td:nth-child(1),
  .rwd-table td:nth-child(6),
  .rwd-table td:nth-child(7) { display: block; }

  /* Размещение */
  .rwd-table td:nth-child(1) { grid-column: 1; }
  .rwd-table td:nth-child(6),
  .rwd-table td:nth-child(7) { grid-column: 2; text-align: right; }

  /* Внешний вид правой колонки */
  .rwd-table td:nth-child(6) { font-size: 16px; font-weight: 500; }
  .rwd-table td:nth-child(7) { font-size: 13px; color: #666666; margin-top: -25px; }

  /* Открытые сделки: показываем статус справа */
  .rwd-table tr[data-status="open"] td:nth-child(6) { 
    grid-column: 2; 
    text-align: right; 
    font-size: 16px; 
    font-weight: 500; 
  }
  .rwd-table tr[data-status="open"] td:nth-child(6)::before {
    content: "Открыта";
    font-weight: 500;
    color: #A67900;
  }
  .rwd-table tr[data-status="open"] td:nth-child(6) > * {
    display: none;
  }
  /* Для дивидендов/купонов на мобильных: показываем обе ячейки (6 и 7) справа */
  .rwd-table tr[data-comment*="дивиден"] td:nth-child(6),
  .rwd-table tr[data-comment*="купон"] td:nth-child(6),
  .rwd-table tr[data-comment*="дивиден"] td:nth-child(7),
  .rwd-table tr[data-comment*="купон"] td:nth-child(7) { 
    display: block; 
    grid-column: 2; 
    text-align: right; 
  }
  
  /* Стили для цены закрытия (ячейка 6) */
  .rwd-table tr[data-comment*="дивиден"] td:nth-child(6),
  .rwd-table tr[data-comment*="купон"] td:nth-child(6) { 
    font-size: 16px; 
    font-weight: 500; 
    margin-bottom: 0px;
  }
  
  /* Стили для комментария (ячейка 7) - такой же как у срока */
  .rwd-table tr[data-comment*="дивиден"] td:nth-child(7),
  .rwd-table tr[data-comment*="купон"] td:nth-child(7) { 
    font-size: 13px; 
    color: #666666; 
    margin-top: -5px;
  }

  /* ВАЖНО: старую синюю подсветку для дивидендов/купона убрали.
     Внешний вид теперь задаёт .status.open (как у «ОТКРЫТА»). */
}
/* Ячейки/стили */
.cell-num{
  text-align:center; font-variant-numeric:tabular-nums;
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:400; font-size:12.8px; line-height:1;
}
tbody tr:nth-child(even) { background-color: rgba(0,0,0,0.04); }
tbody tr:nth-child(odd)  { background-color: rgba(0,0,0,0.01); }
tbody tr:hover{ background:#F0F0F0; }
th.sortable{ cursor:pointer; }

.badge{
  padding:6.4px 9.6px; border-radius:10px;
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:500; font-size:12.8px; line-height:14.64px; text-transform:uppercase;
  display:inline-block;
}
.badge-up{ background:rgba(25,179,107,.15); color:#008A44; border:1px solid rgba(25,179,107,.35); }
.badge-down{ background:rgba(255,77,79,.15); color:#ff8082; border:1px solid rgba(255,77,79,.35); }
.badge-pause{ background:rgba(245,165,36,.15); color:#A67900; border:1px solid rgba(245,165,36,.35); }
.badge-div{ background:rgba(78,161,255,.15); color:#528dcc; border:1px solid rgba(78,161,255,.35); }
.badge-neutral{ background:#F0F0F0; color:#666666; border:1px solid #E0E0E0; }

.status{
  padding:6.4px 9.6px; border-radius:10px;
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:500; font-size:12.8px;
  line-height:14px; /* ПОЧИНЕНО: нормальное значение */
  text-transform:uppercase;
  display:inline-block;
}
.status.open{
  background:rgba(255,199,0,.12); color:#A67900; border:1px solid rgba(255,199,0,.25);
}
.status.closed{
  background:rgba(120,10,207,.12); color:#5D1D91; border:1px solid rgba(120,10,207,.25);
}
.status.info{
  background:#F0F0F0; color:#666666; border:1px solid #E0E0E0;
}

.cell-date{ white-space:nowrap; font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif; font-weight:400; font-size:12.8px; line-height:1; }
.negative{ color:#EF3124; font-weight:700; }
.positive{ color:#008A44; font-weight:700; }

tfoot td{
  padding:12.8px 16px; color:var(--muted);
  font-family:"San Francisco Pro", -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight:400; font-size:12.8px; line-height:1;
}
.small{ color:var(--muted); font-weight:400; font-size:12.8px; line-height:1; }
.footer{ margin-top:24px; color:var(--muted); text-align:center; font-weight:400; font-size:16px; line-height:1; }
</style>
<style>
  .suggestion-active {
    background-color: #f5f5f5 !important;
    font-weight: 500;
  }
</style>
</head>
<body>
<div class="container">
  <h1 style="font-family: Arial, sans-serif; font-weight: 700; font-size: 80px; line-height: 76px; text-transform: lowercase; margin: 0 0 32px;">Сделки «Идеи от Гуру»</h1>

  <div class="toolbar">
    <div class="search" style="position: relative;">
      <input id="searchBox" type="search" placeholder="Поиск по эмитенту..." style="padding: 10px 16px; width: 100%;">
      <div id="searchSuggestions" style="position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #E0E0E0; border-top: none; border-radius: 0 0 10px 10px; max-height: 200px; overflow-y: auto; display: none; z-index: 1000;"></div>
    </div>
    <div class="kpis">
      <div class="chip">Всего: <span id="kpi-total">0</span><small></small></div>
      <div class="chip">Открытые: <span id="kpi-open">0</span></div>
      <div class="chip">Закрытые: <span id="kpi-closed">0</span></div>
    </div>
    <div class="filters">
      <button class="filter active" data-filter="all">ВСЕ</button>
      <button class="filter" data-filter="open">ОТКРЫТЫЕ</button>
      <button class="filter" data-filter="closed">ЗАКРЫТЫЕ</button>
      <button class="filter" data-filter="comment:рост">РОСТ</button>
      <button class="filter" data-filter="comment:падение">ПАДЕНИЕ</button>
      <button class="filter" data-filter="comment:тайм-аут">ТАЙМ-АУТ</button>
      <button class="filter" data-filter="comment:див">ВЫПЛАТЫ</button>
    </div>
  </div>

  <div class="table-wrap">
    <table id="signals" class="rwd-table">
      <thead>
        <tr>
          <th>Эмитент</th>
          <th>Дата открытия</th>
          <th>Комментарий</th>
          <th>Цена открытия</th>
          <th>Цена закрытия</th>
          <th>Результат</th>
          <th>Срок</th>
          <th>Статус</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot><tr><td colspan="8" class="small"></td></tr></tfoot>
    </table>
  </div>
  <div class="footer small"></div>
</div>

<script>
  // Лого по тикерам (можно дополнять)
  const logos = {
    'SBER': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/SBER.png',
    'T': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/T.png',
    'YDEX': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/YDEX.png',
    'NVTK': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/NVTK.png',
    'X5': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/X5.png',
    'SIBN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/SIBN.png',
    'PLZL': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/PLZL.png',
    'WUSH': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/WUSH.png',
'AFLT': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/AFLT.png',
'AFKS': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/AFKS.png',
'ALRS': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/ALRS.png',
'BSPB': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/BSPB.png',
'GAZP': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/GAZP.png',
'GMKN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/GMKN.png',
'IRAO': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/IRAO.png',
'ROSN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/ROSN.png',
'VKCO': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/VKCO.png',
'HEAD': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/HEAD.png',
'MTSS': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MTSS.png',
'NLMK': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/NLMK.png',
'RUAL': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/RUAL.png',
'PHOR': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/PHOR.png',
'PIKK': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/PIKK.png',
'MTLR': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MTLR.png',
'SNGS': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/SNGS.png',
'SVCB': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/SVCB.png',
'TATN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/TATN.png',
'TRNFP': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/TRNFP.png',
'MAGN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MAGN.png',
'HYDR': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/HYDR.png',
'CHMF': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/CHMF.png',
'VSEH': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/VSEH.png',
'DIAS': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/DIAS.png',
'SMLT': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/SMLT.png',
'ASTR': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/ASTR.png',
'POSI': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/POSI.png',
'UGLD': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/UGLD.png',
'TRMK': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/TRMK.png',
'FLOT': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/FLOT.png',
'MGNT': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MGNT.png',
'RTKM': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/RTKM.png',
'ETLN': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/ETLN.png',
'MOEX': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MOEX.png',
'KMAZ': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/KMAZ.png',
'OZON': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/OZON.png',
'BELU': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/BELU.png',
'BANEP': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/BANEP.png',
'LKOH': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/LKOH.png',
'MBNK': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/MBNK.png',
'VTBR': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/VTBR.png',
'CNYRUB': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/CNYRUB.png',
'OFZ': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/RU000A10AA93.png',
'Т': 'https://mybroker.storage.bcs.ru/FinInstrumentLogo/T.png'
  };
</script>
<script id="data" type="application/json">
[
  {
    "Эмитент": "ОФЗ 26247",
    "Дата открытия": "22.08.2025",
    "Тикер": "OFZ",
    "Цена открытия": 946.46,
    "Комментарий": "РОСТ",
    "Цель": "",
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ОФЗ 26238",
    "Дата открытия": "22.08.2025",
    "Тикер": "OFZ",
    "Цена открытия": 628.81,
    "Комментарий": "РОСТ",
    "Цель": "",
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЭРОФЛОТ",
    "Дата открытия": "20.08.2025",
    "Тикер": "AFLT",
    "Цена открытия": 65.95,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 63,
    "Цена закрытия": 63.62,
    "Дата закрытия": "22.08.2025",
    "Результат": "3.53%",
    "Срок": "2 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Лукойл",
    "Дата открытия": "19.08.2025",
    "Тикер": "LKOH",
    "Цена открытия": 6372.5,
    "Комментарий": "РОСТ",
    "Цель": 6690,
    "Цена закрытия": 6259,
    "Дата закрытия": "22.08.2025",
    "Результат": "-1.78%",
    "Срок": "3 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Татнефть",
    "Дата открытия": "19.08.2025",
    "Тикер": "TATN",
    "Цена открытия": 704,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 668,
    "Цена закрытия": 683,
    "Дата закрытия": "22.08.2025",
    "Результат": "2.98%",
    "Срок": "3 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "МТС банк ао",
    "Дата открытия": "15.08.2025",
    "Тикер": "MBNK",
    "Цена открытия": 1360,
    "Комментарий": "РОСТ",
    "Цель": 1428,
    "Цена закрытия": 1456,
    "Дата закрытия": "20.08.2025",
    "Результат": "7.06%",
    "Срок": "5 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Совкомбанк",
    "Дата открытия": "15.08.2025",
    "Тикер": "SVCB",
    "Цена открытия": 16.26,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": "15,5",
    "Цена закрытия": 16.12,
    "Дата закрытия": "20.08.2025",
    "Результат": "0.86%",
    "Срок": "5 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сбербанк",
    "Дата открытия": "14.08.2025",
    "Тикер": "SBER",
    "Цена открытия": 318.85,
    "Комментарий": "РОСТ",
    "Цель": 334.8,
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ИКС 5",
    "Дата открытия": "07.08.2025",
    "Тикер": "X5",
    "Цена открытия": 3048.5,
    "Комментарий": "РОСТ",
    "Цель": 3201,
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Роснефть",
    "Дата открытия": "01.08.2025",
    "Тикер": "ROSN",
    "Цена открытия": "",
    "Комментарий": "Дивиденды",
    "Цель": "",
    "Цена закрытия": 572.5,
    "Дата закрытия": "",
    "Результат": "",
    "Срок": "",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ВТБ",
    "Дата открытия": "31.07.2025",
    "Тикер": "VTBR",
    "Цена открытия": 77.8,
    "Комментарий": "РОСТ",
    "Цель": 81.69,
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Т-Технологии",
    "Дата открытия": "29.07.2025",
    "Тикер": "T",
    "Цена открытия": 3183,
    "Комментарий": "РОСТ",
    "Цель": 3342,
    "Цена закрытия": 3364.8,
    "Дата закрытия": "18.08.2025",
    "Результат": "5.71%",
    "Срок": "20 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "РУСАЛ",
    "Дата открытия": "24.07.2025",
    "Тикер": "RUAL",
    "Цена открытия": 31.72,
    "Комментарий": "РОСТ",
    "Цель": 33.1,
    "Цена закрытия": 33,
    "Дата закрытия": "07.08.2025",
    "Результат": "4.04%",
    "Срок": "14 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Норникель",
    "Дата открытия": "22.07.2025",
    "Тикер": "GMKN",
    "Цена открытия": 119.44,
    "Комментарий": "РОСТ",
    "Цель": 124.9,
    "Цена закрытия": 124.86,
    "Дата закрытия": "07.08.2025",
    "Результат": "4.54%",
    "Срок": "16 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Совкомбанк",
    "Дата открытия": "22.07.2025",
    "Тикер": "SVCB",
    "Цена открытия": "",
    "Комментарий": "Дивиденды",
    "Цель": "",
    "Цена закрытия": 392,
    "Дата закрытия": "",
    "Результат": "",
    "Срок": "",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Совкомбанк",
    "Дата открытия": "26.06.2025",
    "Тикер": "SVCB",
    "Цена открытия": 15.94,
    "Комментарий": "РОСТ",
    "Цель": 16.8,
    "Цена закрытия": 16.91,
    "Дата закрытия": "16.07.2025",
    "Результат": "6.09%",
    "Срок": "20 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "НЛМК шорт",
    "Дата открытия": "24.06.2025",
    "Тикер": "NLMK",
    "Цена открытия": 108,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 101,
    "Цена закрытия": 112.8,
    "Дата закрытия": "18.07.2025",
    "Результат": "-4.44%",
    "Срок": "24 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Роснефть",
    "Дата открытия": "19.06.2025",
    "Тикер": "ROSN",
    "Цена открытия": 455.1,
    "Комментарий": "РОСТ",
    "Цель": 475,
    "Цена закрытия": 473.3,
    "Дата закрытия": "15.08.2025",
    "Результат": "4.00%",
    "Срок": "57 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ПИК",
    "Дата открытия": "17.06.2025",
    "Тикер": "PIKK",
    "Цена открытия": 557.8,
    "Комментарий": "РОСТ",
    "Цель": 594,
    "Цена закрытия": 593.4,
    "Дата закрытия": "30.06.2025",
    "Результат": "6.38%",
    "Срок": "13 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Совкомбанк",
    "Дата открытия": "10.06.2025",
    "Тикер": "SVCB",
    "Цена открытия": 15.46,
    "Комментарий": "РОСТ",
    "Цель": 16.2,
    "Цена закрытия": 16.24,
    "Дата закрытия": "19.06.2025",
    "Результат": "5.05%",
    "Срок": "9 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Полюс Золото",
    "Дата открытия": "05.06.2025",
    "Тикер": "PLZL",
    "Цена открытия": 1794,
    "Комментарий": "РОСТ",
    "Цель": 1900,
    "Цена закрытия": 1899.8,
    "Дата закрытия": "04.07.2025",
    "Результат": "5.90%",
    "Срок": "29 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Норникель",
    "Дата открытия": "03.06.2025",
    "Тикер": "GMKN",
    "Цена открытия": 108,
    "Комментарий": "РОСТ",
    "Цель": 113,
    "Цена закрытия": 113.06,
    "Дата закрытия": "18.07.2025",
    "Результат": "4.69%",
    "Срок": "45 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Транснефть П.",
    "Дата открытия": "27.05.2025",
    "Тикер": "TRNFP",
    "Цена открытия": 1255,
    "Комментарий": "РОСТ",
    "Цель": 1320,
    "Цена закрытия": 1316.4,
    "Дата закрытия": "02.06.2025",
    "Результат": "4.89%",
    "Срок": "6 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ВТБ",
    "Дата открытия": "24.04.2025",
    "Тикер": "VTBR",
    "Цена открытия": 86,
    "Комментарий": "РОСТ",
    "Цель": 89.5,
    "Цена закрытия": 103.2,
    "Дата закрытия": "28.04.2025",
    "Результат": "20.00%",
    "Срок": "4 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЭРОФЛОТ",
    "Дата открытия": "22.04.2025",
    "Тикер": "AFLT",
    "Цена открытия": 72.05,
    "Комментарий": "ТАЙМ-АУТ",
    "Цель": 76.4,
    "Цена закрытия": 65.39,
    "Дата закрытия": "02.07.2025",
    "Результат": "-9.24%",
    "Срок": "71 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Новатэк",
    "Дата открытия": "17.04.2025",
    "Тикер": "NVTK",
    "Цена открытия": 1195.6,
    "Комментарий": "РОСТ",
    "Цель": 1260,
    "Цена закрытия": 1271,
    "Дата закрытия": "28.04.2025",
    "Результат": "6.31%",
    "Срок": "11 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Новатэк",
    "Дата открытия": "16.04.2025",
    "Тикер": "NVTK",
    "Цена открытия": "",
    "Комментарий": "Дивиденды",
    "Цель": "",
    "Цена закрытия": "699,8",
    "Дата закрытия": "",
    "Результат": "",
    "Срок": "",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Яндекс",
    "Дата открытия": "10.04.2025",
    "Тикер": "YDEX",
    "Цена открытия": 4095.5,
    "Комментарий": "РОСТ",
    "Цель": 4340,
    "Цена закрытия": 4351,
    "Дата закрытия": "24.04.2025",
    "Результат": "6.24%",
    "Срок": "14 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сбербанк",
    "Дата открытия": "08.04.2025",
    "Тикер": "SBER",
    "Цена открытия": 291.95,
    "Комментарий": "РОСТ",
    "Цель": 306.9,
    "Цена закрытия": 309.41,
    "Дата закрытия": "22.04.2025",
    "Результат": "5.98%",
    "Срок": "14 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "РУСАЛ",
    "Дата открытия": "20.03.2025",
    "Тикер": "RUAL",
    "Цена открытия": 42.47,
    "Комментарий": "ТАЙМ-АУТ",
    "Цель": 44.7,
    "Цена закрытия": 30.94,
    "Дата закрытия": "02.07.2025",
    "Результат": "-27.15%",
    "Срок": "104 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЛРОСА",
    "Дата открытия": "18.03.2025",
    "Тикер": "ALRS",
    "Цена открытия": 61.79,
    "Комментарий": "РОСТ",
    "Цель": 64.6,
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АФК \"Система",
    "Дата открытия": "11.03.2025",
    "Тикер": "AFKS",
    "Цена открытия": 18.32,
    "Комментарий": "РОСТ",
    "Цель": 19.2,
    "Цена закрытия": 19.53,
    "Дата закрытия": "18.03.2025",
    "Результат": "6.60%",
    "Срок": "7 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "РУСАЛ",
    "Дата открытия": "06.03.2025",
    "Тикер": "RUAL",
    "Цена открытия": 40.99,
    "Комментарий": "РОСТ",
    "Цель": 42.7,
    "Цена закрытия": 42.7,
    "Дата закрытия": "07.03.2025",
    "Результат": "4.17%",
    "Срок": "1 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ВК",
    "Дата открытия": "04.03.2025",
    "Тикер": "VKCO",
    "Цена открытия": 331.9,
    "Комментарий": "РОСТ",
    "Цель": 349,
    "Цена закрытия": 308,
    "Дата закрытия": "20.03.2025",
    "Результат": "-7.20%",
    "Срок": "16 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Китайский ЮАНЬ",
    "Дата открытия": "25.02.2025",
    "Тикер": "CNYRUB",
    "Цена открытия": 11.76,
    "Комментарий": "РОСТ",
    "Цель": 12.55,
    "Цена закрытия": 11.76,
    "Дата закрытия": "25.02.2025",
    "Результат": "",
    "Срок": "0 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АФК \"Система",
    "Дата открытия": "20.02.2025",
    "Тикер": "AFKS",
    "Цена открытия": 17.09,
    "Комментарий": "РОСТ",
    "Цель": 17.9,
    "Цена закрытия": 18.2,
    "Дата закрытия": "25.02.2025",
    "Результат": "6.50%",
    "Срок": "5 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Полюс Золото",
    "Дата открытия": "18.02.2025",
    "Тикер": "PLZL",
    "Цена открытия": 18313,
    "Комментарий": "РОСТ",
    "Цель": 19300,
    "Цена закрытия": 19316.5,
    "Дата закрытия": "20.02.2025",
    "Результат": "5.48%",
    "Срок": "2 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЛРОСА",
    "Дата открытия": "13.02.2025",
    "Тикер": "ALRS",
    "Цена открытия": 60.61,
    "Комментарий": "РОСТ",
    "Цель": 63.6,
    "Цена закрытия": 63.65,
    "Дата закрытия": "18.02.2025",
    "Результат": "5.02%",
    "Срок": "5 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Новатэк",
    "Дата открытия": "11.02.2025",
    "Тикер": "NVTK",
    "Цена открытия": 1148.6,
    "Комментарий": "РОСТ",
    "Цель": 1210,
    "Цена закрытия": 1286,
    "Дата закрытия": "13.02.2025",
    "Результат": "11.96%",
    "Срок": "2 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Газпром",
    "Дата открытия": "06.02.2025",
    "Тикер": "GAZP",
    "Цена открытия": 139.52,
    "Комментарий": "РОСТ",
    "Цель": 147,
    "Цена закрытия": 147.57,
    "Дата закрытия": "12.02.2025",
    "Результат": "5.77%",
    "Срок": "6 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ФосАгро",
    "Дата открытия": "04.02.2025",
    "Тикер": "PHOR",
    "Цена открытия": 7141,
    "Комментарий": "РОСТ",
    "Цель": 7490,
    "Цена закрытия": 6781,
    "Дата закрытия": "06.06.2025",
    "Результат": "-5.04%",
    "Срок": "122 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЭРОФЛОТ",
    "Дата открытия": "30.01.2025",
    "Тикер": "AFLT",
    "Цена открытия": 63.17,
    "Комментарий": "РОСТ",
    "Цель": 66.4,
    "Цена закрытия": 69.1,
    "Дата закрытия": "13.02.2025",
    "Результат": "9.39%",
    "Срок": "14 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ИКС 5",
    "Дата открытия": "28.01.2025",
    "Тикер": "X5",
    "Цена открытия": 3030,
    "Комментарий": "РОСТ",
    "Цель": 3180,
    "Цена закрытия": 3179,
    "Дата закрытия": "29.01.2025",
    "Результат": "4.92%",
    "Срок": "1 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Полюс Золото",
    "Дата открытия": "21.01.2025",
    "Тикер": "PLZL",
    "Цена открытия": 15169.5,
    "Комментарий": "РОСТ",
    "Цель": 15900,
    "Цена закрытия": 15915,
    "Дата закрытия": "22.01.2025",
    "Результат": "4.91%",
    "Срок": "1 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ВК",
    "Дата открытия": "16.01.2025",
    "Тикер": "VKCO",
    "Цена открытия": 334,
    "Комментарий": "РОСТ",
    "Цель": 354,
    "Цена закрытия": 355.8,
    "Дата закрытия": "20.01.2025",
    "Результат": "6.53%",
    "Срок": "4 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Яндекс",
    "Дата открытия": "14.01.2025",
    "Тикер": "YDEX",
    "Цена открытия": 4029,
    "Комментарий": "РОСТ",
    "Цель": 4230,
    "Цена закрытия": 4229,
    "Дата закрытия": "07.02.2025",
    "Результат": "4.96%",
    "Срок": "24 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Вуш",
    "Дата открытия": "09.01.2025",
    "Тикер": "WUSH",
    "Цена открытия": 168.2,
    "Комментарий": "РОСТ",
    "Цель": 178,
    "Цена закрытия": 174.07,
    "Дата закрытия": "15.01.2025",
    "Результат": "3.49%",
    "Срок": "6 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Вуш",
    "Дата открытия": "28.12.2024",
    "Тикер": "WUSH",
    "Цена открытия": 158.89,
    "Комментарий": "РОСТ",
    "Цель": 170,
    "Цена закрытия": 178.96,
    "Дата закрытия": "09.01.2025",
    "Результат": "12.63%",
    "Срок": "12 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Т-Технологии",
    "Дата открытия": "28.12.2024",
    "Тикер": "Т",
    "Цена открытия": "",
    "Комментарий": "Дивиденды",
    "Цель": "",
    "Цена закрытия": 555,
    "Дата закрытия": "",
    "Результат": "",
    "Срок": "",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЛРОСА",
    "Дата открытия": "24.12.2024",
    "Тикер": "ALRS",
    "Цена открытия": 52.6,
    "Комментарий": "РОСТ",
    "Цель": 55,
    "Цена закрытия": 57.53,
    "Дата закрытия": "30.12.2024",
    "Результат": "9.37%",
    "Срок": "6 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Банк Спб",
    "Дата открытия": "19.12.2024",
    "Тикер": "BSPB",
    "Цена открытия": 319.93,
    "Комментарий": "РОСТ",
    "Цель": 337,
    "Цена закрытия": 335.41,
    "Дата закрытия": "20.12.2024",
    "Результат": "4.84%",
    "Срок": "1 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сбербанк",
    "Дата открытия": "17.12.2024",
    "Тикер": "SBER",
    "Цена открытия": 224.7,
    "Комментарий": "РОСТ",
    "Цель": 235,
    "Цена закрытия": 246.68,
    "Дата закрытия": "20.12.2024",
    "Результат": "9.78%",
    "Срок": "3 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Татнефть",
    "Дата открытия": "10.12.2024",
    "Тикер": "TATN",
    "Цена открытия": 559.3,
    "Комментарий": "РОСТ",
    "Цель": 588,
    "Цена закрытия": 594.7,
    "Дата закрытия": "20.12.2024",
    "Результат": "6.33%",
    "Срок": "10 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "МТС",
    "Дата открытия": "03.12.2024",
    "Тикер": "MTSS",
    "Цена открытия": 174.95,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 165,
    "Цена закрытия": 164.95,
    "Дата закрытия": "05.12.2024",
    "Результат": "5.72%",
    "Срок": "2 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АФК \"Система",
    "Дата открытия": "26.11.2024",
    "Тикер": "AFKS",
    "Цена открытия": 12.13,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 11.6,
    "Цена закрытия": 11.73,
    "Дата закрытия": "16.12.2024",
    "Результат": "3.30%",
    "Срок": "20 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Т-Технологии",
    "Дата открытия": "21.11.2024",
    "Тикер": "T",
    "Цена открытия": 2524,
    "Комментарий": "РОСТ",
    "Цель": 2640,
    "Цена закрытия": 2642.6,
    "Дата закрытия": "26.12.2024",
    "Результат": "4.70%",
    "Срок": "35 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Мечел",
    "Дата открытия": "19.11.2024",
    "Тикер": "MTLR",
    "Цена открытия": 99.9,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 95.6,
    "Цена закрытия": 95.31,
    "Дата закрытия": "21.11.2024",
    "Результат": "4.59%",
    "Срок": "2 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ИНТЕР РАО",
    "Дата открытия": "14.11.2024",
    "Тикер": "IRAO",
    "Цена открытия": 3.96,
    "Комментарий": "РОСТ",
    "Цель": 4.14,
    "Цена закрытия": "",
    "Дата закрытия": "Открыта",
    "Результат": "",
    "Срок": "В работе",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Полюс Золото",
    "Дата открытия": "12.11.2024",
    "Тикер": "PLZL",
    "Цена открытия": 14457,
    "Комментарий": "РОСТ",
    "Цель": "",
    "Цена закрытия": 15065,
    "Дата закрытия": "12.12.2024",
    "Результат": "4.21%",
    "Срок": "30 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЛРОСА",
    "Дата открытия": "01.11.2024",
    "Тикер": "ALRS",
    "Цена открытия": "",
    "Комментарий": "Дивиденды",
    "Цель": "",
    "Цена закрытия": "697,2",
    "Дата закрытия": "",
    "Результат": "",
    "Срок": "",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Мечел",
    "Дата открытия": "31.10.2024",
    "Тикер": "MTLR",
    "Цена открытия": 96.99,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": "",
    "Цена закрытия": 100.37,
    "Дата закрытия": "01.11.2024",
    "Результат": "-3.48%",
    "Срок": "1 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "ИНТЕР РАО",
    "Дата открытия": "29.10.2024",
    "Тикер": "IRAO",
    "Цена открытия": 3.76,
    "Комментарий": "РОСТ",
    "Цель": 3.93,
    "Цена закрытия": 3.96,
    "Дата закрытия": "12.11.2024",
    "Результат": "5.32%",
    "Срок": "14 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Хедхантер",
    "Дата открытия": "24.10.2024",
    "Тикер": "HEAD",
    "Цена открытия": 4145,
    "Комментарий": "РОСТ",
    "Цель": 4350,
    "Цена закрытия": 4368,
    "Дата закрытия": "29.10.2024",
    "Результат": "5.38%",
    "Срок": "5 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сургутнефтегаз",
    "Дата открытия": "21.10.2024",
    "Тикер": "SNGS",
    "Цена открытия": 56.67,
    "Комментарий": "РОСТ",
    "Цель": 59.8,
    "Цена закрытия": 58.12,
    "Дата закрытия": "22.11.2024",
    "Результат": "2.56%",
    "Срок": "32 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Роснефть",
    "Дата открытия": "11.10.2024",
    "Тикер": "ROSN",
    "Цена открытия": 492.1,
    "Комментарий": "РОСТ",
    "Цель": 530,
    "Цена закрытия": 535.35,
    "Дата закрытия": "20.12.2024",
    "Результат": "8.79%",
    "Срок": "70 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Полюс Золото",
    "Дата открытия": "03.10.2024",
    "Тикер": "PLZL",
    "Цена открытия": 13399.5,
    "Комментарий": "РОСТ",
    "Цель": 14050,
    "Цена закрытия": 14211,
    "Дата закрытия": "21.10.2024",
    "Результат": "6.06%",
    "Срок": "18 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Норникель",
    "Дата открытия": "02.10.2024",
    "Тикер": "GMKN",
    "Цена открытия": 109.86,
    "Комментарий": "РОСТ",
    "Цель": 121,
    "Цена закрытия": 120.88,
    "Дата закрытия": "15.01.2025",
    "Результат": "10.03%",
    "Срок": "105 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АЛРОСА",
    "Дата открытия": "02.10.2024",
    "Тикер": "ALRS",
    "Цена открытия": 54.21,
    "Комментарий": "РОСТ",
    "Цель": 57.3,
    "Цена закрытия": 48.03,
    "Дата закрытия": "03.12.2024",
    "Результат": "-11.40%",
    "Срок": "62 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Газпром НЕФТЬ",
    "Дата открытия": "02.10.2024",
    "Тикер": "SIBN",
    "Цена открытия": 708.55,
    "Комментарий": "РОСТ",
    "Цель": 725,
    "Цена закрытия": 699.3,
    "Дата закрытия": "11.10.2024",
    "Результат": "-1.31%",
    "Срок": "9 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сбербанк",
    "Дата открытия": "02.10.2024",
    "Тикер": "SBER",
    "Цена открытия": 265.56,
    "Комментарий": "РОСТ",
    "Цель": "",
    "Цена закрытия": 230.45,
    "Дата закрытия": "11.12.2024",
    "Результат": "-13.22%",
    "Срок": "70 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "Сургутнефтегаз",
    "Дата открытия": "02.10.2024",
    "Тикер": "SNGS",
    "Цена открытия": 25.75,
    "Комментарий": "РОСТ",
    "Цель": "",
    "Цена закрытия": 23.44,
    "Дата закрытия": "28.11.2024",
    "Результат": "-8.97%",
    "Срок": "57 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  },
  {
    "Эмитент": "АФК \"Система",
    "Дата открытия": "01.10.2024",
    "Тикер": "AFKS",
    "Цена открытия": 15.8,
    "Комментарий": "ПАДЕНИЕ",
    "Цель": 15,
    "Цена закрытия": 15,
    "Дата закрытия": "11.10.2024",
    "Результат": "5.06%",
    "Срок": "10 дней",
    "": "",
    "__1": "",
    "__2": "",
    "__3": "",
    "__4": "",
    "__5": "",
    "__6": "",
    "__7": "",
    "__8": "",
    "__9": "",
    "__10": "",
    "__11": "",
    "__12": "",
    "__13": "",
    "__14": "",
    "__15": "",
    "__16": ""
  }
]
</script>

<script>
// Рендер
document.addEventListener('DOMContentLoaded', function() {
  if ('ontouchstart' in window) {
    document.documentElement.classList.add('touch-device');
    document.querySelectorAll('.table-wrap').forEach(el => { el.style.webkitOverflowScrolling = 'touch'; });
  }

  (function(){
    const data = JSON.parse(document.getElementById('data').textContent);
    const tbody = document.querySelector('#signals tbody');

    function badgeClass(t){
      const s=(t||'').toLowerCase();
      if(s==='рост') return 'badge-up';
      if(s==='падение') return 'badge-down';
      if(s==='тайм-аут') return 'badge-pause';
      if(s.includes('дивиден')) return 'badge-div';
      if(s.includes('купон')) return 'badge-div';
      return 'badge-neutral';
    }
    function statusOf(row){
      const dz=(row['Дата закрытия']||'').toString().trim().toLowerCase();
      const srok=(row['Срок']||'').toString().trim().toLowerCase();
      if(dz==='открыта' || srok==='в работе') return 'Открыта';
      return 'Закрыта';
    }
    function numSortVal(v){
      const s=(v??'').toString().trim().replace(/\s+/g,'').replace('%','').replace(',','.');
      const n=parseFloat(s);
      return isNaN(n)?'':n;
    }
    function dateSortVal(v){
      const s=(v??'').toString().trim();
      if(!s || s.toLowerCase()==='открыта') return '9999-12-31';
      const m=s.match(/(\d{2})\.(\d{2})\.(\d{4})/);
      return m? `${m[3]}-${m[2]}-${m[1]}` : s;
    }

    data.forEach(row=>{
      const status = statusOf(row);
      const statusClass = status==='Открыта' ? 'open' : (status==='Закрыта' ? 'closed':'info');
      const tr = document.createElement('tr');
      tr.dataset.status = statusClass;
      tr.dataset.comment = (row['Комментарий']||'').toString().toLowerCase();

      const res=(row['Результат']||'').toString().trim();
      const resHtml = res ? (res.startsWith('-')
        ? `<span class="negative">${res}</span>`
        : `<span class="positive">${res}</span>`) : '';

      const ticker = (row['Тикер'] || '').toString().trim();
      const logoUrl = logos[ticker];
      const logoHtml = logoUrl
        ? `<div style="display: flex; align-items: center; gap: 12px;">
            <img src="${logoUrl}" alt="${ticker}" style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
            <div style="display: flex; flex-direction: column; align-items: flex-start;">
              <span class="bold-emitent">${row['Эмитент'] || ''}</span>
              <span class="small" style="font-size: 14px;">${ticker}</span>
            </div>
          </div>`
        : (row['Эмитент'] || '');

      /* === Результат: выполняем требование ===
         - Если комментарий Дивиденды/Купон:
           ПК -> ничего; Мобайл -> плашка как "ОТКРЫТА" с текстом комментария
         - Иначе: если статус Открыта -> плашка "ОТКРЫТА", иначе число/процент
      */
  // +++ ВСТАВЬТЕ ЭТОТ КОД ВМЕСТО СТАРОГО +++
      const commentRaw = (row['Комментарий'] ?? '').toString();
      const lc = commentRaw.toLowerCase();
      const isDivOrCoupon = lc.includes('дивиден') || lc.includes('купон');

      let resultCellHtml;
      let termCellHtml;

      if (isDivOrCoupon) {
        // Для дивидендов/купонов:
        // На ПК: прочерки в обеих колонках
        // На мобильных: цена закрытия + комментарий под ним
        resultCellHtml = `<span class="desktop-only">—</span><span class="only-mobile">${row['Цена закрытия'] ?? ''}</span>`;
        termCellHtml = `<span class="desktop-only">—</span><span class="only-mobile">${row['Комментарий'] || ''}</span>`;
      } else {
        // Для обычных сделок оставляем как было
        resultCellHtml = (status === 'Открыта' ? '—' : resHtml);
        termCellHtml = row['Срок'] || '';
      }

      tr.innerHTML = `
        <td class="bold-emitent" data-label="Эмитент">${logoHtml}</td>
        <td class="cell-date" data-sort="${dateSortVal(row['Дата открытия'])}" data-label="Дата открытия">${row['Дата открытия']||''}</td>
        <td data-label="Комментарий"><span class="badge ${badgeClass(row['Комментарий'])}">${row['Комментарий']||''}</span></td>
        <td class="cell-num num" data-sort="${numSortVal(row['Цена открытия'])}" data-label="Цена открытия">${row['Цена открытия']??''}</td>
        <td class="cell-num num" data-sort="${numSortVal(row['Цена закрытия'])}" data-label="Цена закрытия">${row['Цена закрытия']??''}</td>
        <td class="cell-num" data-sort="${numSortVal(row['Результат'])}" data-label="Результат">${resultCellHtml}</td>
        <td style="white-space: nowrap" data-label="Срок">${termCellHtml}</td>
        <td data-label="Статус"><span class="status ${statusClass}">${status}</span></td>
      `;
      tbody.appendChild(tr);
    });

    // KPI (считаем по фактически отрендеренным строкам)
    const rows = tbody.querySelectorAll('tr');
    document.getElementById('kpi-total').textContent  = rows.length;
    document.getElementById('kpi-open').textContent   = [...rows].filter(r=>r.dataset.status==='open').length;
    document.getElementById('kpi-closed').textContent = [...rows].filter(r=>r.dataset.status==='closed').length;

    // Поиск с автодополнением
    const searchBox = document.getElementById('searchBox');
    const suggestionsContainer = document.getElementById('searchSuggestions');
    const emitents = [...new Set(data.map(row => row['Эмитент'] || '').filter(Boolean))];
    let currentSuggestionIndex = -1;
    let filteredSuggestions = [];

    searchBox.addEventListener('input', function() {
      const q = this.value.trim().toLowerCase();
      currentSuggestionIndex = -1;
      
      // Показываем подсказки
      if (q.length > 0) {
        filteredSuggestions = emitents.filter(emitent => 
          emitent.toLowerCase().startsWith(q)
        );
        
        if (filteredSuggestions.length > 0) {
          suggestionsContainer.innerHTML = filteredSuggestions.map((emitent, index) => 
            `<div class="suggestion-item ${index === currentSuggestionIndex ? 'suggestion-active' : ''}" 
                 data-index="${index}" 
                 style="padding: 10px 16px; cursor: pointer; border-bottom: 1px solid #f0f0f0;" 
                 onmouseover="highlightSuggestion(${index})" 
                 onmouseout="resetSuggestionHighlight()"
                 onclick="selectSuggestion(${index})">
              ${emitent}
            </div>`
          ).join('');
          suggestionsContainer.style.display = 'block';
        } else {
          suggestionsContainer.style.display = 'none';
        }
      } else {
        suggestionsContainer.style.display = 'none';
        filteredSuggestions = [];
      }
      
      // Фильтруем таблицу
      filterByEmitent(q);
    });

    // Обработка клавиш для навигации
    searchBox.addEventListener('keydown', function(e) {
      if (suggestionsContainer.style.display === 'block') {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          currentSuggestionIndex = Math.min(currentSuggestionIndex + 1, filteredSuggestions.length - 1);
          highlightSuggestion(currentSuggestionIndex);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          currentSuggestionIndex = Math.max(currentSuggestionIndex - 1, -1);
          highlightSuggestion(currentSuggestionIndex);
        } else if (e.key === 'Enter') {
          e.preventDefault();
          if (currentSuggestionIndex >= 0) {
            selectSuggestion(currentSuggestionIndex);
          }
        } else if (e.key === 'Escape') {
          hideSuggestions();
        }
      }
    });

    // Скрываем подсказки при клике вне поля
    document.addEventListener('click', function(e) {
      if (!searchBox.contains(e.target) && !suggestionsContainer.contains(e.target)) {
        hideSuggestions();
      }
    });

    function highlightSuggestion(index) {
      // Сбрасываем все подсветки
      const items = suggestionsContainer.querySelectorAll('.suggestion-item');
      items.forEach(item => item.classList.remove('suggestion-active'));
      
      // Подсвечиваем выбранный элемент
      if (index >= 0 && index < items.length) {
        items[index].classList.add('suggestion-active');
        currentSuggestionIndex = index;
      }
    }

    function resetSuggestionHighlight() {
      // Сбрасываем подсветку при уходе мыши, но сохраняем клавиатурный выбор
      const items = suggestionsContainer.querySelectorAll('.suggestion-item');
      items.forEach((item, idx) => {
        item.classList.toggle('suggestion-active', idx === currentSuggestionIndex);
      });
    }

    function selectSuggestion(index) {
      if (index >= 0 && index < filteredSuggestions.length) {
        const selectedEmitent = filteredSuggestions[index];
        searchBox.value = selectedEmitent;
        
        // Устанавливаем курсор в конец текста
        setTimeout(() => {
          searchBox.focus();
          searchBox.setSelectionRange(selectedEmitent.length, selectedEmitent.length);
        }, 0);
        
        hideSuggestions();
        filterByEmitent(selectedEmitent);
      }
    }

    function hideSuggestions() {
      suggestionsContainer.style.display = 'none';
      currentSuggestionIndex = -1;
    }

    function filterByEmitent(query) {
      const q = query.toLowerCase();
      tbody.querySelectorAll('tr').forEach(tr => {
        const emitentCell = tr.querySelector('td[data-label="Эмитент"]');
        const emitentText = emitentCell ? emitentCell.textContent.toLowerCase() : '';
        tr.style.display = emitentText.includes(q) ? '' : 'none';
      });
    }

    // Глобальные функции для обработки событий мыши
    window.highlightSuggestion = highlightSuggestion;
    window.resetSuggestionHighlight = resetSuggestionHighlight;
    window.selectSuggestion = selectSuggestion;
    window.hideSuggestions = hideSuggestions;

    // Фильтры
    const buttons=document.querySelectorAll('button.filter');
    let activeFilter='all';
    buttons.forEach(btn=>{
      btn.addEventListener('click',()=>{
        buttons.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        activeFilter=btn.dataset.filter;
        applyFilters();
      });
    });
    function applyFilters() {
      const rows = tbody.querySelectorAll('tr');
      const searchQuery = searchBox.value.trim().toLowerCase();

      rows.forEach(tr => {
        const status = tr.dataset.status;
        const comment = tr.dataset.comment || '';
        const text = tr.textContent.toLowerCase();

        let show = true;
        if (activeFilter !== 'all') {
          if (activeFilter === 'open' && status !== 'open') show = false;
          else if (activeFilter === 'closed') {
            // Exclude dividend and coupon entries from closed filter
            if (status !== 'closed' || comment.includes('дивиден') || comment.includes('купон')) {
              show = false;
            }
          }
          else if (activeFilter.startsWith('comment:')) {
            const key = activeFilter.split(':')[1];
            if (key === 'див') {
              if (!comment.includes('дивиден') && !comment.includes('купон')) show = false;
            } else if (!comment.includes(key)) show = false;
          }
        }
        if (show && searchQuery) {
          const emitentCell = tr.querySelector('td[data-label="Эмитент"]');
          const emitentText = emitentCell ? emitentCell.textContent.toLowerCase() : '';
          if (!emitentText.includes(searchQuery)) show = false;
        }
        tr.style.display = show ? '' : 'none';
      });
    }
  })();
});
</script>

<noscript>
  <div class="table-wrap">
    <table class="rwd-table">
      <thead>
        <tr>
          <th>Эмитент</th>
          <th>Дата открытия</th>
          <th>Комментарий</th>
          <th>Цена открытия</th>
          <th>Цена закрытия</th>
          <th>Результат</th>
          <th>Срок</th>
          <th>Статус</th>
        </tr>
      </thead>
      <tbody><!-- Static fallback --></tbody>
    </table>
  </div>
</noscript>
</body>
</html>
